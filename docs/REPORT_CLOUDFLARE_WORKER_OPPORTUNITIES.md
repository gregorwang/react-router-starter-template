# 报告：Cloudflare Workers 视角的能力拓展清单

## 现有 Cloudflare 组件
- Workers 作为应用运行时
- D1 存储项目/对话/消息
- R2 用于对话归档
- Durable Objects 做限流

## 可扩展能力建议
1. 语义检索与知识库
- 使用 Workers AI 生成向量 + Vectorize 做向量检索，补齐“对话语义搜索/知识库检索”。

2. 异步任务与离线处理
- 用 Queues 承载归档、摘要、批量导出、批量分析等耗时任务，避免阻塞请求。

3. 供应商统一与可观测
- 用 AI Gateway 统一不同模型供应商的调用与监控，降低供应商切换成本。

4. 文件与附件
- 通过 R2 支持文件上传/附件解析，降低 Worker 请求体压力。

5. 配置与缓存
- 用 KV 存储用户/项目级配置，减少 D1 热点访问。

## 风险与注意事项
- Workers 请求时长有限，大任务必须异步化。
- D1 不适合全文搜索或大规模向量检索，需与 Vectorize 组合。
- 需要对 API 成本、限流、失败重试做可视化与预警。

## 推荐优先级
P0
- 建立 AI Gateway 与统一错误/监控
- 将归档/压缩异步化

P1
- Vectorize 语义检索
- R2 附件与预处理

P2
- 多租户与权限体系（配合 KV/D1 分区）
